
# Copyright (C) Igor Sysoev
# Copyright (C) Rap, Inc.


echo $rp_n "checking for $rp_include ...$rp_c"

cat << END >> $RP_AUTOCONF_ERR

----------------------------------------
checking for $rp_include

END


rp_found=no

cat << END > $RP_AUTOTEST.c

$RP_INCLUDE_SYS_PARAM_H
#include <$rp_include>

int main(void) {
    return 0;
}

END


rp_test="$CC -o $RP_AUTOTEST $RP_AUTOTEST.c"

eval "$rp_test >> $RP_AUTOCONF_ERR 2>&1"

if [ -x $RP_AUTOTEST ]; then

    rp_found=yes

    echo " found"

    rp_name=`echo $rp_include \
              | tr abcdefghijklmnopqrstuvwxyz/. ABCDEFGHIJKLMNOPQRSTUVWXYZ__`


    have=RP_HAVE_$rp_name . auto/have_headers

    eval "RP_INCLUDE_$rp_name='#include <$rp_include>'"

else
    echo " not found"

    echo "----------"    >> $RP_AUTOCONF_ERR
    cat $RP_AUTOTEST.c  >> $RP_AUTOCONF_ERR
    echo "----------"    >> $RP_AUTOCONF_ERR
    echo $rp_test       >> $RP_AUTOCONF_ERR
    echo "----------"    >> $RP_AUTOCONF_ERR
fi

rm -rf $RP_AUTOTEST*
